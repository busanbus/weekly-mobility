<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëª¨ë¹Œë¦¬í‹° ì£¼ê°„ë™í–¥</title>
  <meta name="description" content="ëª¨ë¹Œë¦¬í‹° ìµœì‹  ë™í–¥ê³¼ ì •ì±… ë³€í™”ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”. ì¹´ë“œë‰´ìŠ¤ í˜•ì‹ìœ¼ë¡œ ëª¨ë¹Œë¦¬í‹° íŠ¸ë Œë“œë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.">
  <meta name="keywords" content="ëª¨ë¹Œë¦¬í‹°, ì£¼ê°„ë™í–¥, ëª¨ë¹Œë¦¬í‹° íŠ¸ë Œë“œ, ëª¨ë¹Œë¦¬í‹° ì •ì±…, ì¹´ë“œë‰´ìŠ¤">
  <meta name="author" content="ë¶€ì‚°ë²„ìŠ¤">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="ëª¨ë¹Œë¦¬í‹° ì£¼ê°„ë™í–¥">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://ifh.cc/g/OQ5Sgg.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ëª¨ë¹Œë¦¬í‹° ì£¼ê°„ë™í–¥ | ë¶€ì‚°ì‹œë‚´ë²„ìŠ¤ìš´ì†¡ì‚¬ì—…ì¡°í•©</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZXZ064TVJE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZXZ064TVJE');
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="https://www.busanbus.or.kr/assets/img/common/favicon.png">
  <link rel="stylesheet" href="style/home-index.css">
  <style></style>
</head>
<body>
  <main-nav-no-lang></main-nav-no-lang>
  <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
  <section class="hero-section">
    <div class="hero-content">
      <div class="hero-badge">
        ğŸ“ˆ ë§¤ì£¼ ì—…ë°ì´íŠ¸
      </div>
      <h1 class="hero-title">
        ëª¨ë¹Œë¦¬í‹°<br>
        <span style="background: linear-gradient(135deg, #60a5fa, #a78bfa); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ì£¼ê°„ë™í–¥</span>
      </h1>
      <p class="hero-subtitle">
        ëª¨ë¹Œë¦¬í‹° ìµœì‹  ë™í–¥ê³¼ ì •ì±… ë³€í™”ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.<br>
        ì¹´ë“œë‰´ìŠ¤ í˜•ì‹ìœ¼ë¡œ ëª¨ë¹Œë¦¬í‹° íŠ¸ë Œë“œë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="hero-stat-number">33</span>
          <span class="hero-stat-label">ëˆ„ì  ë¦¬í¬íŠ¸</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-number">25-12-01</span>
          <span class="hero-stat-label">ìµœê·¼ ì—…ë°ì´íŠ¸</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ: ìµœì‹  ë™í–¥ë§Œ -->
  <main class="main-container">
    <!-- ê¸°ì¡´ .latest-section div ì‚­ì œ ë˜ëŠ” ì£¼ì„ì²˜ë¦¬ -->
    <!-- <div class="latest-section"></div> -->

    <script type="module">
    import SearchSystem from './components/search-system.js';

    const renderLatestWeeks = async () => {
      const searchSystem = new SearchSystem();
      await searchSystem.loadData();

      // ì „ì²´ ì£¼ì°¨ ë¦¬ìŠ¤íŠ¸(ìµœì‹ ìˆœ) ìƒì„± ë° ì£¼ì°¨ ë‹¨ìœ„ë¡œ ì¤‘ë³µ ì œê±°
      const seen = new Set();
      const weeksAll = [];
      for (const item of searchSystem.searchableData) {
        const key = `${item.year}-${String(item.month).padStart(2,'0')}-${item.week}`;
        if (!seen.has(key)) {
          seen.add(key);
          weeksAll.push({
            year: item.year,
            month: item.month,
            week: item.week,
            weeklyUrl: item.weeklyUrl,
          });
        }
      }

      // ì£¼ì°¨ë³„ ëŒ€í‘œ ì œëª©(ìµœëŒ€ 5ê°œ) ë° ëŒ€í‘œ ì´ë¯¸ì§€ ìˆ˜ì§‘
      const weekToTitles = {};
      const weekToImage = {};
      for (const item of searchSystem.searchableData) {
        const key = `${item.year}-${String(item.month).padStart(2,'0')}-${item.week}`;
        if (seen.has(key)) {
          if (!weekToTitles[key]) weekToTitles[key] = [];
          if (weekToTitles[key].length < 5) weekToTitles[key].push(item.title);
          if (!weekToImage[key] && item.image && item.image.trim()) {
            weekToImage[key] = item.image.trim();
          }
        }
      }

      // ê¸°ì¡´ latest-section ì œê±° í›„ ì»¨í…Œì´ë„ˆ/ë²„íŠ¼ êµ¬ì„±
      document.querySelectorAll('.latest-section').forEach(el => el.remove());
      const parent = document.querySelector('main') || document.body;
      const listContainer = document.createElement('div');
      listContainer.id = 'latest-list';
      parent.appendChild(listContainer);

      const loadMoreWrap = document.createElement('div');
      loadMoreWrap.className = 'load-more-wrap';
      const loadMoreBtn = document.createElement('button');
      loadMoreBtn.className = 'load-more-btn';
      loadMoreBtn.innerHTML = `
        <svg class="load-more-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="9"></circle>
          <path d="M12 8v8M8 12h8"></path>
        </svg>
        ë” ë³´ê¸°`;
      loadMoreWrap.appendChild(loadMoreBtn);
      parent.appendChild(loadMoreWrap);

      let cursor = 0;
      const PAGE_SIZE = 5;

      const renderBatch = () => {
        const slice = weeksAll.slice(cursor, cursor + PAGE_SIZE);
        slice.forEach(w => {
          const sec = document.createElement('section');
          sec.className = 'latest-section';

          const header = document.createElement('div');
          header.className = 'latest-header';
          const titleWrap = document.createElement('div');
          titleWrap.className = 'latest-title';
          const icon = document.createElement('div');
          icon.className = 'latest-icon';
          icon.textContent = 'ğŸš€';
          titleWrap.appendChild(icon);
          titleWrap.append('ìµœì‹  ë™í–¥');
          const badge = document.createElement('div');
          badge.className = 'latest-badge';
          badge.textContent = 'NEW';
          header.appendChild(titleWrap);
          header.appendChild(badge);

          const content = document.createElement('div');
          content.className = 'latest-content';

          const info = document.createElement('div');
          info.className = 'latest-info';
          const h3 = document.createElement('h3');
          h3.textContent = `${w.year}ë…„ ${w.month}ì›” ${w.week}ì£¼ì°¨ ëª¨ë¹Œë¦¬í‹° ì£¼ê°„ë™í–¥`;
          const meta = document.createElement('div');
          meta.className = 'latest-meta';
          const span = document.createElement('span');
          span.textContent = `ğŸ“… ${w.year}.${String(w.month).padStart(2,'0')}.ì£¼ì°¨${w.week}`;
          meta.appendChild(span);
          const p = document.createElement('p');
          const key = `${w.year}-${String(w.month).padStart(2,'0')}-${w.week}`;
          const titles = weekToTitles[key] || [];
          if (titles.length) {
            const titleList = titles.map(t => `ã€Œ${t}ã€`).join(', ');
            p.textContent = `ì´ë²ˆ ì£¼ì°¨ì—ëŠ” ${titleList} ë“± ëª¨ë¹Œë¦¬í‹° íŠ¸ë Œë“œë¥¼ í•œëˆˆì— ì‚´í´ë´…ë‹ˆë‹¤.`;
          } else {
            p.textContent = 'ì´ë²ˆ ì£¼ì°¨ì˜ ì£¼ìš” ëª¨ë¹Œë¦¬í‹° íŠ¸ë Œë“œë¥¼ í•œëˆˆì— ì‚´í´ë´…ë‹ˆë‹¤.';
          }
          const actions = document.createElement('div');
          actions.className = 'latest-actions';
          const a = document.createElement('a');
          a.className = 'btn-primary';
          a.href = w.weeklyUrl;
          a.textContent = 'ğŸ“– ë°”ë¡œ ì½ê¸°';
          actions.appendChild(a);

          info.appendChild(h3);
          info.appendChild(meta);
          info.appendChild(p);
          info.appendChild(actions);

          const preview = document.createElement('div');
          preview.className = 'latest-preview';
          const imageUrl = weekToImage[key];
          if (imageUrl) {
            const img = document.createElement('img');
            img.src = imageUrl;
            img.alt = `${w.year}ë…„ ${w.month}ì›” ${w.week}ì£¼ì°¨ ëŒ€í‘œ ì´ë¯¸ì§€`;
            img.loading = 'lazy';
            img.onerror = () => {
              preview.innerHTML = '';
              const previewIcon = document.createElement('div');
              previewIcon.className = 'preview-icon';
              previewIcon.textContent = 'ğŸ“°';
              const previewText = document.createElement('div');
              previewText.className = 'preview-text';
              previewText.textContent = 'ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤';
              preview.appendChild(previewIcon);
              preview.appendChild(previewText);
            };
            preview.appendChild(img);
          } else {
            const previewIcon = document.createElement('div');
            previewIcon.className = 'preview-icon';
            previewIcon.textContent = 'ğŸ“°';
            const previewText = document.createElement('div');
            previewText.className = 'preview-text';
            previewText.textContent = 'ëŒ€í‘œ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤';
            preview.appendChild(previewIcon);
            preview.appendChild(previewText);
          }

          content.appendChild(info);
          content.appendChild(preview);

          sec.appendChild(header);
          sec.appendChild(content);

          listContainer.appendChild(sec);
        });

        cursor += slice.length;
        if (cursor >= weeksAll.length) {
          loadMoreBtn.disabled = true;
          loadMoreBtn.textContent = 'ëª¨ë“  í•­ëª©ì„ í‘œì‹œí–ˆìŠµë‹ˆë‹¤';
        }
      };

      // ì´ˆê¸° 5ê°œ ë Œë”
      renderBatch();

      // ë”ë³´ê¸° í´ë¦­ ì‹œ ë‹¤ìŒ 5ê°œ ì¶”ê°€ ë Œë”
      loadMoreBtn.addEventListener('click', () => {
        if (cursor < weeksAll.length) {
          renderBatch();
        }
      });
    };

    renderLatestWeeks().catch(err => {
      console.error('ìµœì‹  ì£¼ì°¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤:', err);
    });
    </script>
  </main>

  <home-index-footer></home-index-footer>
  <floating-sns></floating-sns>
  <script type="module" src="js/chatbot.js"></script>
  <script type="module" src="components/floating-sns.js"></script>
  <script type="module" src="components/main-nav-no-lang.js"></script>
  <script type="module" src="components/home-index-footer.js"></script>
</body>
</html> 